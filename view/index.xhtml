<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/jquery.sparkline.js"></script>

<script type="text/javascript">
$(function() {
    /** This code runs when everything has been loaded on the page */
    /* Inline sparklines take their values from the contents of the tag */
    $('.inlinesparkline').sparkline(); 

    /* Sparklines can also take their values from the first argument 
    passed to the sparkline() function */
    var myvalues = [10,8,5,7,4,4,1];
    $('.dynamicsparkline').sparkline(myvalues);

    /* The second argument gives options such as chart type */
    $('.dynamicbar').sparkline(myvalues, {type: 'bar', barColor: 'green'} );

    /* Use 'html' instead of an array of values to pass options 
    to a sparkline with data in the tag */
    $('.inlinebar').sparkline('html', {type: 'bar', barColor: 'red'} );
});
</script>
<!-- p>
Inline Sparkline: <span class="inlinesparkline">1,4,4,7,5,9,10</span>.
Sparkline with dynamic data: <span class="dynamicsparkline">Loading..</span>
Bar chart with dynamic data: <span class="dynamicbar">Loading..</span>
Bar chart with inline data: <span class="inlinebar">1,3,4,5,3,5</span>
</p -->

<?r @projects.each do |project| ?>
<a href="#{project.web_url}" target="_blank" title="#{project.activity}">
<div class="project #{project.last_build_status} #{project.activity}">
  <div class="icon"> </div>
  <div class="bar_chart">
    <div style="background: green;
                width: #{project.health}%;
                position: absolute;">
              #{project.success_count || 0 }
    </div>
    <div style="background: red;
                width: #{100 - project.health}%;
                float: right;">
              #{project.failure_count || 0}  
    </div>
  </div>
  <div class="stats">
    <h2>#{project.name}</h2>
    <p>#{project.last_build_label}(#{project.last_build_time.strftime("at %I:%M%p")})</p>
    <p>Last success : #{project.last_successful_build.to_i} hours ago </p> 
  </div>


</div>
</a>
<?r end ?>
